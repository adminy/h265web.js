global.APPEND_TYPE_STREAM=0,global.APPEND_TYPE_FRAME=1,global.DEFAULT_WIDTH=400,global.DEFAULT_HEIGHT=400,global.DEFAULT_FPS=25,global.DEFAULT_FIXED=!1,global.DEFAULT_SAMPLERATE=44100,global.VIDEO_PTS_VAL=-1,global.VIDEO_TEST_SEEK=!0,global.SLEEP_WAIT=function(e){for(var t=Date.now();Date.now()-t<=e;);};var AfterGetNalThenMvLen=3;function CodecImp(){}CodecImp.prototype.pushFrameRet=function(e){return!(!e||null==e||null==e)&&(this.frameList&&null!=this.frameList&&null!=this.frameList||(this.frameList=[]),this.frameList.push(e),!0)},CodecImp.prototype.nextFrame=function(){return!this.frameList&&null==this.frameList||null==this.frameList&&this.frameList.length<1?null:this.frameList.shift()},CodecImp.prototype.clearFrameRet=function(){this.frameList=null},CodecImp.prototype.setStreamRet=function(e){this.stream=e},CodecImp.prototype.getStreamRet=function(){return this.stream},CodecImp.prototype.pushStreamRet=function(e){if(!e||null==e||null==e)return!1;if(!this.stream||null==this.stream||null==this.stream)return this.stream=e,!0;var t=this.stream.length,r=e.length,n=new Uint8Array(t+r);return n.set(this.stream,0),n.set(e,t),this.stream=n,!0},CodecImp.prototype.clearStreamRet=function(){this.stream=null},CodecImp.prototype.subBuf=function(e,t){var r=new Uint8Array(this.stream.subarray(e,t+1));return this.stream=new Uint8Array(this.stream.subarray(t+1)),r},CodecImp.prototype.nextNalu=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(null==this.stream||this.stream.length<=4)return!1;for(var t=-1,r=0;r<this.stream.length;r++){if(r+5>=this.stream.length)return-1!=t&&this.subBuf(t,this.stream.length-1);if(0==this.stream[r]&&0==this.stream[r+1]&&1==this.stream[r+2]||0==this.stream[r]&&0==this.stream[r+1]&&0==this.stream[r+2]&&1==this.stream[r+3]){var n=r;if(r+=AfterGetNalThenMvLen,-1==t)t=n;else{if(e<=1)return this.subBuf(t,n-1);--e}}}return!1},CodecImp.prototype.parseFrameStruct=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(null==e||!e||null==e)return null;var t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],n=t*r,o=Module.HEAPU32[e/4+1+1];return{width:t,height:r,sizeWH:n,imageBufferY:Module.HEAPU8.subarray(o,o+n),imageBufferB:Module.HEAPU8.subarray(o+n+8,o+n+8+n/4),imageBufferR:Module.HEAPU8.subarray(o+n+8+n/4+8,o+n+8+n/2+8)}};var AudioContext=window.AudioContext||window.webkitAudioContext,AUDIO_WAIT=.04;function AudioImp(){}AudioImp.prototype.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=44100;return"sampleRate"in e&&(r=e.sampleRate),t.appendType=APPEND_TYPE_STREAM,"appendType"in e&&(t.appendType=e.appendType),t.audioCtx=new AudioContext({latencyHint:"interactive",sampleRate:r}),t.sourceList=[],t.startStatus=!1,t.sampleQueue=[],t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList[0].onended=function(){t.swapSource(0,1)},t.sourceList[1].onended=function(){t.swapSource(1,0)},t.durationMs=-1,!0},AudioImp.prototype.setDurationMs=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;this.durationMs=e},AudioImp.prototype.swapSource=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,r=this;if(0==r.startStatus)return null;if(e<0||e>=r.sourceList.length)return null;if(t<0||t>=r.sourceList.length)return null;try{r.sourceList[e].disconnect(r.audioCtx.destination),r.sourceList[e]=null}catch(e){return null}r.decodeSample(t,e)},AudioImp.prototype.seek=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.sourceList[e].start(0,t)},AudioImp.prototype.addSample=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return!(null==e||!e||null==e)&&(0<this.durationMs&&1e3*e.pts>=this.durationMs-10||this.sampleQueue.push(e),!0)},AudioImp.prototype.decodeSample=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,r=this;if(t<0||t>=r.sourceList.length)return-1;if(null!=r.sourceList[t]&&null!=r.sourceList[t]&&r.sourceList[t]||(r.sourceList[t]=r.audioCtx.createBufferSource(),r.sourceList[t].onended=function(){r.swapSource(t,e)}),0==r.sampleQueue.length)return r.sourceList[t].connect(r.audioCtx.destination),r.sourceList[t].start(),r.sourceList[t].stop(),1;for(var n=null,o=50<=r.sampleQueue.length?50:r.sampleQueue.length,i=!1,a=r.sampleQueue[0],s=0;s<o;){if(0==i&&0<=global.VIDEO_PTS_VAL){var u=a.pts;console.log("audio pts "+u+",VIDEO_PTS_VAL "+global.VIDEO_PTS_VAL);var l=u-global.VIDEO_PTS_VAL;if(0<l&&l<=AUDIO_WAIT||l<0&&-1*l<=AUDIO_WAIT||0==l)i=!0;else{if(0<l)return r.sourceList[t].connect(r.audioCtx.destination),r.sourceList[t].start(),r.sourceList[t].stop(),1;if(l<0){console.log("throw this frame"),a=r.sampleQueue.shift(),console.log(a),s++;continue}}}null==a&&(a=r.sampleQueue.shift()),s++;var c=null;if(c=r.appendType==APPEND_TYPE_STREAM?a:a.data,null==n)n=new Uint8Array(c);else{var d=new Uint8Array(c.length+n.length);d.set(n,0),d.set(c,n.length),n=d}a=null}var f=null;if(null==(f=n)||f.length<1)return r.sourceList[t].connect(r.audioCtx.destination),r.sourceList[t].start(),r.sourceList[t].stop(),1;var p=f.buffer;try{r.audioCtx.decodeAudioData(p,function(e){r.sourceList[t].buffer=e,r.sourceList[t].connect(r.audioCtx.destination),r.sourceList[t].start()},function(e){e.err})}catch(e){return alert("Crash[brower]! Please refresh your page"),-2}return 0},AudioImp.prototype.play=function(){0==this.startStatus&&(this.startStatus=!0,this.decodeSample(0,1))},AudioImp.prototype.pause=function(){var e=this;e.startStatus=!1;for(var t=0;t<e.sourceList.length;t++)try{null!=e.sourceList[t]&&(e.sourceList[t].stop(),e.sourceList[t].disconnect(e.audioCtx.destination),e.sourceList[t]=null)}catch(e){console.log("error:",e)}},AudioImp.prototype.stop=function(){this.pause(),this.sampleQueue=[]},AudioImp.prototype.cleanQueue=function(){this.sampleQueue=[]};var YUVBuffer=require("yuv-buffer"),YUVCanvas=require("yuv-canvas"),DEFAULT_WIDTH=400,DEFAULT_HEIGHT=400,DEFAULT_FPS=25,DEFAULT_FIXED=!1;function PlayerImp(){var vconf=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};console.log("Player INIT!"),this.standardizingConf(vconf),this.renderId="glplayer",this.fps=this.vconf.fps,this.canvasBox=document.querySelector("div#"+this.renderId),this.canvasBox.style.backgroundColor="black",this.canvasBox.style.width=this.vconf.width,this.canvasBox.style.height=this.vconf.height,eval(function(e,t,r,n,o){if(n=function(e){return(e<62?"":n(parseInt(e/62)))+(35<(e%=62)?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;t--;)o[n(t)]=r[t]||n(t);r=[function(e){return o[e]}],n=function(){return"\\w+"},t=1}for(;t--;)r[t]&&(e=e.replace(new RegExp("\\b"+n(t)+"\\b","g"),r[t]));return e}('n.o  = f.d(\'e\');    n.o.m.k = "8";    n.o.j = \'<a>\'    + \'<h c="#g" l="2">\'    + "7 4 6 5"    + "</h>"    + "</a>";    n.o.m.p = "1";    n.o.m.i = "3";    n.o.m.q = "0";    n.b.9(n.o);',27,"101|230px|3|40px|Missile|Support|Tech|Video|absolute|appendChild|b|canvasBox|color|createElement|div|document|e9e9e9|font|height|innerHTML|position|size|style|this|waterMark|width|zIndex".split("|"),0,{})),this.canvas=document.createElement("canvas"),this.canvas.id=this.renderId,this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=YUVCanvas.attach(this.canvas),this.videoIsStart=!0}global.InitPlayerImp=function(){return new PlayerImp(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},PlayerImp.prototype.standardizingConf=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"width"in(this.vconf=e)==!1&&(this.vconf.width=DEFAULT_WIDTH),"height"in e==!1&&(this.vconf.height=DEFAULT_HEIGHT),"fps"in e==!1&&(this.vconf.fps=DEFAULT_FPS),"fixed"in e==!1&&(this.vconf.fixed=DEFAULT_FIXED),this.vconf.widthNum=parseInt(this.vconf.width),this.vconf.heightNum=parseInt(this.vconf.height)},PlayerImp.prototype.drawBuffer=function(e){this.yuv.drawFrame(e)},PlayerImp.prototype.releaseDraw=function(){this.yuv.clear()},PlayerImp.prototype.blobRead=function(e,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(e){if(200===o.status){var t=o.getResponseHeader("Content-Type"),r=new Blob([this.response],{type:t});void 0!==window.navigator.msSaveBlob||n(r)}},o.send()},PlayerImp.prototype.checkDisplaySize=function(e,t){var r=this.vconf.widthNum,n=this.vconf.heightNum,o=0,i=0;if(!0===this.vconf.fixed)o=r,i=n;else{var a=1;a=t/n<e/r?(r/e).toFixed(2):(n/t).toFixed(2),o=parseInt(e*a),i=parseInt(t*a)}if(this.canvas.offsetWidth!=o||this.canvas.offsetHeight!=i){var s=parseInt((this.canvasBox.offsetHeight-i)/2),u=parseInt((this.canvasBox.offsetWidth-o)/2);this.canvas.style.marginTop=s+"px",this.canvas.style.marginLeft=u+"px",this.canvas.style.width=o+"px",this.canvas.style.height=i+"px"}return[o,i]},PlayerImp.prototype.drawImage=function(e,t,r,n,o){this.checkDisplaySize(e,t);var i=YUVBuffer.format({width:e,height:t,chromaWidth:e/2,chromaHeight:t/2,displayWidth:this.canvas.offsetWidth,displayHeight:this.canvas.offsetHeight}),a=YUVBuffer.frame(i);a.y.bytes=r,a.y.stride=e,a.u.bytes=n,a.u.stride=e/2,a.v.bytes=o,a.v.stride=e/2,this.drawBuffer(a)},PlayerImp.prototype.initFileReader=function(){var t=this;t.fileReader=new FileReader,t.fileReaderAudio=new FileReader,t.fileReader.onload=function(){try{var e=new Uint8Array(t.fileReader.result);t.codeImpObj.setStreamRet(e)}catch(e){throw alert("Crash[brower]! Please refresh your page"),e}t.time_loop_tool=window.setInterval(function(){t.playFrame()},1e3/t.fps)},t.fileReaderAudio.onload=function(){try{var e=new Uint8Array(t.fileReaderAudio.result);for(t.audiImpObj.addSample(e);;)if(console.log(t.videoIsStart),1==t.videoIsStart){t.audiImpObj.play();break}}catch(e){throw alert("Crash[brower]! Please refresh your page"),e}}},PlayerImp.prototype.initPlayer=function(t){var r=this;if(r.time_loop_tool=null,r.initMissile=null,r.initializeDecoder=null,r.decodeCodecContext=null,r.getFrame=null,r.release=null,r.codeImpObj=null,r.audiImpObj=null,window.WebAssembly)return Module.onRuntimeInitialized=function(){r.initMissile=Module.cwrap("initMissile","number",[]),r.initializeDecoder=Module.cwrap("initializeDecoder","number",[]),r.decodeCodecContext=Module.cwrap("decodeCodecContext","number",["number","number"]),r.getFrame=Module.cwrap("getFrame","number",[]),r.release=Module.cwrap("release","number",[]),r.codeImpObj=new CodecImp,r.audiImpObj=new AudioImp,r.audiImpObj.init();var e=r.initMissile();console.log("WASM initialized done!"+e),r.initFileReader(),t()},!0;var e="unsupport WASM!";return/iPhone|iPad/.test(window.navigator.userAgent)&&(e+=" ios:min-version 11"),alert(e),alert("此设备不支持此应用! 请使用支持WASM和WEBGL的设备！"),!1},PlayerImp.prototype.playFrame=function(){this.videoIsStart=!0;var e=this.codeImpObj.nextNalu();if(0!=e){var t=Module._malloc(e.length);if(Module.HEAP8.set(e,t),0<=this.decodeCodecContext(t,e.length)){var r=this.getFrame(),n=this.codeImpObj.parseFrameStruct(r);n.width&&n.height?this.drawImage(n.width,n.height,n.imageBufferY,n.imageBufferB,n.imageBufferR):console.log("Get PicFrame failed! PicWidth/height is equal to 0, maybe timeout!")}Module._free(t)}},PlayerImp.prototype.closeTimeLoop=function(){window.clearInterval(this.time_loop_tool),this.videoIsStart=!0,this.time_loop_tool=null},PlayerImp.prototype.reStartPlay=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,r=this;r.closeTimeLoop(),r.fps=t;r.release();r.videoIsStart=!1,r.initializeDecoder(),this.blobRead(e,function(e){r.fileReader.readAsArrayBuffer(e)})},PlayerImp.prototype.reStartPlayAudio=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this;t.closeTimeLoop(),this.blobRead(e,function(e){t.fileReaderAudio.readAsArrayBuffer(e)})},PlayerImp.prototype.continueStart=function(){var e=this;null==e.time_loop_tool?e.time_loop_tool=window.setInterval(function(){e.playFrame()},1e3/e.fps):console.log("already playing!!!fucking stop ur action!")},PlayerImp.prototype.endAudio=function(){this.audiImpObj.stop(),this.audiImpObj.init(this.initAudioOptions)},PlayerImp.prototype.reInitDecoder=function(){this.release();this.initializeDecoder()},PlayerImp.prototype.stop=function(){this.closeTimeLoop(),this.endAudio(),this.reInitDecoder(),this.codeImpObj.clearStreamRet(),this.codeImpObj.clearFrameRet()};var YUVBuffer=require("yuv-buffer"),YUVCanvas=require("yuv-canvas");function PlayBase(e){this.initPlayer(e)}global.Init=function(e){return new PlayBase(e)},PlayBase.prototype.settingPlayer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};console.log("settingPlayer"),console.log(e),"fps"in e&&(this.vconf.fps=e.fps),"sampleRate"in e&&(this.vconf.sampleRate=e.sampleRate),this.fps=this.vconf.fps,this.sampleRate=e.sampleRate},PlayBase.prototype.createPlayer=function(){var vconf=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},callback=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.standardizingConf(vconf),this.renderId="glplayer",this.fps=this.vconf.fps,this.sampleRate=this.vconf.sampleRate,this.initAudioOptions={sampleRate:this.sampleRate,appendType:this.vconf.appendHevcType},this.audiImpObj.init(this.initAudioOptions),this.time_loop_tool=null,this.media_runtime={durationMs:-1},this.canvasBox=document.querySelector("div#"+this.renderId),this.canvasBox.style.backgroundColor="black",this.canvasBox.style.width=this.vconf.width,this.canvasBox.style.height=this.vconf.height,eval(function(e,t,r,n,o){if(n=function(e){return(e<62?"":n(parseInt(e/62)))+(35<(e%=62)?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;t--;)o[n(t)]=r[t]||n(t);r=[function(e){return o[e]}],n=function(){return"\\w+"},t=1}for(;t--;)r[t]&&(e=e.replace(new RegExp("\\b"+n(t)+"\\b","g"),r[t]));return e}('n.o  = f.d(\'e\');    n.o.m.k = "8";    n.o.j = \'<a>\'    + \'<h c="#g" l="2">\'    + "7 4 6 5"    + "</h>"    + "</a>";    n.o.m.p = "1";    n.o.m.i = "3";    n.o.m.q = "0";    n.b.9(n.o);',27,"101|230px|3|40px|Missile|Support|Tech|Video|absolute|appendChild|b|canvasBox|color|createElement|div|document|e9e9e9|font|height|innerHTML|position|size|style|this|waterMark|width|zIndex".split("|"),0,{})),this.canvas=document.createElement("canvas"),this.canvas.id=this.renderId,this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=YUVCanvas.attach(this.canvas),callback&&callback(),!0},PlayBase.prototype.standardizingConf=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"width"in(this.vconf=e)==!1&&(this.vconf.width=DEFAULT_WIDTH),"height"in e==!1&&(this.vconf.height=DEFAULT_HEIGHT),"fps"in e==!1&&(this.vconf.fps=DEFAULT_FPS),"fixed"in e==!1&&(this.vconf.fixed=DEFAULT_FIXED),"sampleRate"in e==!1&&(this.vconf.sampleRate=DEFAULT_SAMPLERATE),"appendHevcType"in e==!1&&(this.vconf.appendHevcType=APPEND_TYPE_STREAM),this.vconf.widthNum=parseInt(this.vconf.width),this.vconf.heightNum=parseInt(this.vconf.height)},PlayBase.prototype.setDurationMs=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;this.media_runtime.durationMs=e,this.audiImpObj.setDurationMs(e)},PlayBase.prototype.appendHevcFrame=function(e){return this.vconf.appendHevcType==APPEND_TYPE_STREAM?this.codeImpObj.pushStreamRet(e):this.vconf.appendHevcType==APPEND_TYPE_FRAME?this.codeImpObj.pushFrameRet(e):void 0},PlayBase.prototype.appendAACFrame=function(e){return this.audiImpObj.addSample(e)},PlayBase.prototype.endAudio=function(){this.audiImpObj.stop(),this.audiImpObj.init(this.initAudioOptions)},PlayBase.prototype.drawBuffer=function(e){this.yuv.drawFrame(e)},PlayBase.prototype.releaseDraw=function(){this.yuv.clear()},PlayBase.prototype.checkDisplaySize=function(e,t){var r=this.vconf.widthNum,n=this.vconf.heightNum,o=0,i=0;if(!0===this.vconf.fixed)o=r,i=n;else{var a=1;a=t/n<e/r?(r/e).toFixed(2):(n/t).toFixed(2),o=parseInt(e*a),i=parseInt(t*a)}if(this.canvas.offsetWidth!=o||this.canvas.offsetHeight!=i){var s=parseInt((this.canvasBox.offsetHeight-i)/2),u=parseInt((this.canvasBox.offsetWidth-o)/2);this.canvas.style.marginTop=s+"px",this.canvas.style.marginLeft=u+"px",this.canvas.style.width=o+"px",this.canvas.style.height=i+"px"}return[o,i]},PlayBase.prototype.drawImage=function(e,t,r,n,o){this.checkDisplaySize(e,t);var i=YUVBuffer.format({width:e,height:t,chromaWidth:e/2,chromaHeight:t/2,displayWidth:this.canvas.offsetWidth,displayHeight:this.canvas.offsetHeight}),a=YUVBuffer.frame(i);a.y.bytes=r,a.y.stride=e,a.u.bytes=n,a.u.stride=e/2,a.v.bytes=o,a.v.stride=e/2,this.drawBuffer(a)},PlayBase.prototype.initPlayer=function(e){var t=this;if(t.initMissile=null,t.initializeDecoder=null,t.decodeCodecContext=null,t.getFrame=null,t.release=null,t.codeImpObj=null,t.audiImpObj=null,window.WebAssembly)return Module.onRuntimeInitialized=function(){t.initMissile=Module.cwrap("initMissile","number",[]),t.initializeDecoder=Module.cwrap("initializeDecoder","number",[]),t.decodeCodecContext=Module.cwrap("decodeCodecContext","number",["number","number"]),t.getFrame=Module.cwrap("getFrame","number",[]),t.release=Module.cwrap("release","number",[]),t.codeImpObj=new CodecImp,t.audiImpObj=new AudioImp;t.initMissile();t.initializeDecoder(),e&&e()},!0;var r="unsupport WASM!";return/iPhone|iPad/.test(window.navigator.userAgent)&&(r+=" ios:min-version 11"),alert(r),alert("此设备不支持此应用! 请使用支持WASM和WEBGL的设备！"),!1},PlayBase.prototype.playFrame=function(){var e=null;if(this.vconf.appendHevcType==APPEND_TYPE_STREAM)e=this.codeImpObj.nextNalu();else{if(this.vconf.appendHevcType!=APPEND_TYPE_FRAME)return!1;var t=this.codeImpObj.nextFrame();if(!t||null==t)return!1;console.log(t),e=t.data,global.VIDEO_PTS_VAL=t.pts}if(console.log("global.VIDEO_PTS_VAL "+global.VIDEO_PTS_VAL),0!=e){var r=Module._malloc(e.length);if(Module.HEAP8.set(e,r),0<=this.decodeCodecContext(r,e.length)){var n=this.getFrame(),o=this.codeImpObj.parseFrameStruct(n);o.width&&o.height?this.drawImage(o.width,o.height,o.imageBufferY,o.imageBufferB,o.imageBufferR):console.log("Get PicFrame failed! PicWidth/height is equal to 0, maybe timeout!")}Module._free(r)}},PlayBase.prototype.reInitDecoder=function(){this.release();this.initializeDecoder()},PlayBase.prototype.closeTimeLoop=function(){null!=this.time_loop_tool&&window.clearInterval(this.time_loop_tool),this.time_loop_tool=null},PlayBase.prototype.play=function(e){var t=this,r=1e3/this.fps;console.log("fps: "+this.fps),t.time_loop_tool=window.setInterval(function(){0<t.media_runtime.durationMs&&1e3*global.VIDEO_PTS_VAL>=t.media_runtime.durationMs&&t.stop(),t.playFrame(),e&&e()},r),t.audiImpObj.play()},PlayBase.prototype.continues=function(){this.play()},PlayBase.prototype.pause=function(){this.closeTimeLoop(),this.audiImpObj.pause()},PlayBase.prototype.cleanSample=function(){this.audiImpObj.cleanQueue()},PlayBase.prototype.stop=function(){this.closeTimeLoop(),this.endAudio(),this.reInitDecoder(),this.codeImpObj.clearStreamRet(),this.codeImpObj.clearFrameRet(),this.media_runtime.durationMs=-1,global.VIDEO_PTS_VAL=-1};var MP4Box=require("mp4box"),STARTCODE=new Uint8Array([0,0,0,1]),SAMPLEINDEX={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12,Reserved:13,"frequency is written explictly":15};function Mp4Parser(){}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}global.InitMp4Parser=function(){return new Mp4Parser},Mp4Parser.prototype.setStartCode=function(e){var t=null;return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?((t=e)[0]=STARTCODE[0],t[1]=STARTCODE[1],t[2]=STARTCODE[2],t[3]=STARTCODE[3]):((t=new Uint8Array(STARTCODE.length+e.length)).set(STARTCODE,0),t.set(e,STARTCODE.length)),t},Mp4Parser.prototype.setAACAdts=function(e){var t=null,r=this.aacProfile,n=SAMPLEINDEX[this.sampleRate],o=new Uint8Array(7),i=o.length+e.length;return o[0]=255,o[1]=241,o[2]=(r-1<<6)+(n<<2)+0,o[3]=128+(i>>11),o[4]=(2047&i)>>3,o[5]=31+((7&i)<<5),o[6]=252,(t=new Uint8Array(i)).set(o,0),t.set(e,o.length),t},Mp4Parser.prototype.demux=function(e){var m=this;e.fileStart=0,m.mp4boxfile=MP4Box.createFile(),m.movieInfo=null,m.durationMs=-1,m.fps=-1,m.sampleRate=-1,m.aacProfile=2,m.size={width:-1,height:-1},m.trackVideos=[],m.trackAudios=[],m.mp4boxfile.onError=function(e){console.log(e)},m.mp4boxfile.onSamples=function(e,t,r){for(var n=0;n<r.length;n++){var o=r[n],i=o.data,a=null;if(!(null==i||i.length<4)&&i){var s=r[n].dts/r[n].timescale;if(1==e){var u=o.description.hvcC;if(0==n){var l=u.nalu_arrays,c=m.setStartCode(l[0][0].data,!1),d=m.setStartCode(l[1][0].data,!1),f=m.setStartCode(l[2][0].data,!1),p=m.setStartCode(l[3][0].data,!1);(a=new Uint8Array(c.length+d.length+f.length+p.length+i.length)).set(c,0),a.set(d,c.length),a.set(f,c.length+d.length),a.set(p,c.length+d.length+f.length),a.set(m.setStartCode(i,!0),c.length+d.length+f.length+p.length)}else a=m.setStartCode(i,!0);m.trackVideos.push({pts:s,data:a})}else 2==e&&(a=m.setAACAdts(i),m.trackAudios.push({pts:s,data:a}))}}},this.mp4boxfile.onReady=function(e){console.log(e);var t=-1;t=(m.movieInfo=e).videoTracks[0].samples_duration/e.videoTracks[0].timescale,m.durationMs=1e3*t,m.fps=e.videoTracks[0].nb_samples/t,m.sampleRate=e.audioTracks[0].audio.sample_rate;var r=e.audioTracks[0].codec.split(".");m.aacProfile=r[r.length-1],m.size.width=e.videoTracks[0].track_width,m.size.height=e.videoTracks[0].track_height,m.initializeAllSourceBuffers(),m.mp4boxfile.start()},this.mp4boxfile.appendBuffer(e),this.mp4boxfile.flush()},Mp4Parser.prototype.play=function(){},Mp4Parser.prototype.getDurationMs=function(){return this.durationMs},Mp4Parser.prototype.getFPS=function(){return this.fps},Mp4Parser.prototype.getSampleRate=function(){return this.sampleRate},Mp4Parser.prototype.getSize=function(){return this.size},Mp4Parser.prototype.popBuffer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=this,r=null,n=-1;if(1==e&&0<t.trackVideos.length){var o=t.trackVideos.shift();n<0&&(n=o.pts),r=o.data}else if(2==e&&0<t.trackAudios.length)for(var i=2;0<t.trackAudios.length&&0<=i;){o=t.trackAudios.shift();n<0&&(n=o.pts);var a=o.data;if(null==r)r=a;else{var s=new Uint8Array(r.length+a.length);s.set(r,0),s.set(a,r.length),r=s}i--}return null==r?null:{pts:n,data:r}},Mp4Parser.prototype.addBuffer=function(e){var t=e.id;this.mp4boxfile.setExtractionOptions(t)},Mp4Parser.prototype.initializeAllSourceBuffers=function(){if(this.movieInfo){for(var e=this.movieInfo,t=0;t<e.tracks.length;t++){var r=e.tracks[t];this.addBuffer(r)}this.initializeSourceBuffers()}},Mp4Parser.prototype.onInitAppended=function(e){var t=e.target;"open"===t.ms.readyState&&(t.sampleNum=0,t.removeEventListener("updateend",this.onInitAppended),t.ms.pendingInits--,0===t.ms.pendingInits&&this.mp4boxfile.start())},Mp4Parser.prototype.initializeSourceBuffers=function(){for(var e=this.mp4boxfile.initializeSegmentation(),t=0;t<e.length;t++){var r=e[t].user;0===t&&(r.ms.pendingInits=0),r.addEventListener("updateend",this.onInitAppended),r.appendBuffer(e[t].buffer),r.segmentIndex=0,r.ms.pendingInits++}};var Module=void 0!==Module?Module:{},moduleOverrides={},key;for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var arguments_=[],thisProgram="./this.program",quit_=function(e,t){throw t},ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_HAS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;ENVIRONMENT_IS_WEB="object"===("undefined"==typeof window?"undefined":_typeof(window)),ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_HAS_NODE="object"===("undefined"==typeof process?"undefined":_typeof(process))&&"object"===_typeof(process.versions)&&"string"==typeof process.versions.node,ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="",read_,readAsync,readBinary,setWindowTitle,nodeFS,nodePath;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}ENVIRONMENT_IS_NODE?(scriptDirectory=__dirname+"/",read_=function(e,t){var r;return nodeFS=nodeFS||require("fs"),e=(nodePath=nodePath||require("path")).normalize(e),r=nodeFS.readFileSync(e),t?r:r.toString()},readBinary=function(e){var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},1<process.argv.length&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),process.on("unhandledRejection",abort),quit_=function(e){process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}):ENVIRONMENT_IS_SHELL?("undefined"!=typeof read&&(read_=function(e){return read(e)}),readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(assert("object"===_typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?arguments_=scriptArgs:"undefined"!=typeof arguments&&(arguments_=arguments),"function"==typeof quit&&(quit_=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=function(e){document.title=e});var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);function dynamicAlloc(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=t+e+15&-16;return r>_emscripten_get_heap_size()&&abort(),HEAP32[DYNAMICTOP_PTR>>2]=r,t}function getNativeTypeSize(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return 4;if("i"!==e[0])return 0;var t=parseInt(e.substr(1));return assert(t%8==0,"getNativeTypeSize invalid bits "+t+", type "+e),t/8}}moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var asm2wasmImports={"f64-rem":function(e,t){return e%t},debugger:function(){}},functionPointers=new Array(0),wasmBinary,noExitRuntime,wasmMemory;function setValue(e,t,r,n){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,1<=+Math_abs(tempDouble=t)?0<tempDouble?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-(~~tempDouble>>>0))/4294967296)>>>0:0],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.wasmBinary&&(wasmBinary=Module.wasmBinary),Module.noExitRuntime&&(noExitRuntime=Module.noExitRuntime),"object"!==("undefined"==typeof WebAssembly?"undefined":_typeof(WebAssembly))&&err("no native wasm support detected");var wasmTable=new WebAssembly.Table({initial:566,maximum:566,element:"anyfunc"}),ABORT=!1,EXITSTATUS=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(e){var t=Module["_"+e];return assert(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function ccall(e,t,r,n,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);stringToUTF8(e,t=stackAlloc(r),r)}return t},array:function(e){var t=stackAlloc(e.length);return writeArrayToMemory(e,t),t}};var a=getCFunc(e),s=[],u=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===u&&(u=stackSave()),s[l]=c(n[l])):s[l]=n[l]}var d,f=a.apply(null,s);return d=f,f="string"===t?UTF8ToString(d):"boolean"===t?Boolean(d):d,0!==u&&stackRestore(u),f}function cwrap(e,t,r,n){var o=(r=r||[]).every(function(e){return"number"===e});return"string"!==t&&o&&!n?getCFunc(e):function(){return ccall(e,t,r,arguments,n)}}var ALLOC_NONE=3;function allocate(e,t,r,n){var o,i;i="number"==typeof e?(o=!0,e):(o=!1,e.length);var a,s="string"==typeof t?t:null;if(a=r==ALLOC_NONE?n:[_malloc,stackAlloc,dynamicAlloc][r](Math.max(i,s?1:t.length)),o){var u;for(assert(0==(3&(n=a))),u=a+(-4&i);n<u;n+=4)HEAP32[n>>2]=0;for(u=a+i;n<u;)HEAP8[n++>>0]=0;return a}if("i8"===s)return e.subarray||e.slice?HEAPU8.set(e,a):HEAPU8.set(new Uint8Array(e),a),a;for(var l,c,d,f=0;f<i;){var p=e[f];0!==(l=s||t[f])?("i64"==l&&(l="i32"),setValue(a+f,p,l),d!==l&&(c=getNativeTypeSize(l),d=l),f+=c):f++}return a}function getMemory(e){return(runtimeInitialized?_malloc:dynamicAlloc)(e)}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t,r){for(var n=t+r,o=t;e[o]&&!(n<=o);)++o;if(16<o-t&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(0<n))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(55296<=s&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(i<=r)break;t[r++]=s}else if(s<=2047){if(i<=r+1)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(i<=r+2)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(i<=r+3)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);55296<=n&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function allocateUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t);return r&&stringToUTF8Array(e,HEAP8,r,t),r}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}var WASM_PAGE_SIZE=65536,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function alignUp(e,t){return 0<e%t&&(e+=t-e%t),e}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var DYNAMIC_BASE=5400048,DYNAMICTOP_PTR=156960,INITIAL_TOTAL_MEMORY=Module.TOTAL_MEMORY||33554432;function callRuntimeCallbacks(e){for(;0<e.length;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_TOTAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),TTY.init(),callRuntimeCallbacks(__ATINIT__)}function preMain(){FS.ignorePermissions=!1,callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,Math_trunc=Math.trunc,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),out(e+=""),err(e),ABORT=!0,EXITSTATUS=1,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}Module.preloadedImages={},Module.preloadedAudios={};var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(e){return String.prototype.startsWith?e.startsWith(dataURIPrefix):0===e.indexOf(dataURIPrefix)}var wasmBinaryFile="missile.wasm",tempDouble,tempI64;function getBinary(){try{if(wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(wasmBinaryFile);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){return wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!=typeof fetch?new Promise(function(e,t){e(getBinary())}):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()}).catch(function(){return getBinary()})}function createWasm(){var t={env:asmLibraryArg,wasi_unstable:asmLibraryArg,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:asm2wasmImports};function r(e,t){var r=e.exports;Module.asm=r,removeRunDependency("wasm-instantiate")}function n(e){r(e.instance)}function o(e){return getBinaryPromise().then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,r)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||"function"!=typeof fetch)return o(n);fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(n,function(e){err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),o(n)})})}(),{}}function demangle(e){return e}function demangleAll(e){return e.replace(/\b__Z[\w\d_]+/g,function(e){var t=demangle(e);return e===t?e:t+" ["+e+"]"})}function jsStackTrace(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile)),Module.asm=createWasm,__ATINIT__.push({func:function(){___emscripten_environ_constructor()}});var ENV={};function ___buildEnvironment(e){var t,r;___buildEnvironment.called?(r=HEAP32[e>>2],t=HEAP32[r>>2]):(___buildEnvironment.called=!0,ENV.USER="web_user",ENV.LOGNAME="web_user",ENV.PATH="/",ENV.PWD="/",ENV.HOME="/home/web_user",ENV.LANG=("object"===("undefined"==typeof navigator?"undefined":_typeof(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",ENV._=thisProgram,t=getMemory(1024),r=getMemory(256),HEAP32[r>>2]=t,HEAP32[e>>2]=r);var n=[],o=0;for(var i in ENV)if("string"==typeof ENV[i]){var a=i+"="+ENV[i];n.push(a),o+=a.length}if(1024<o)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");for(var s=0;s<n.length;s++){writeAsciiToMemory(a=n[s],t),HEAP32[r+4*s>>2]=t,t+=a.length+1}HEAP32[r+4*n.length>>2]=0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}var PATH={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),r=t[0],n=t[1];return r||n?r+(n=n&&n.substr(0,n.length-1)):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)}},PATH_FS={resolve:function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:FS.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return(t?"/":"")+(e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=PATH_FS.resolve(e).substr(1),t=PATH_FS.resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(60);for(var o=0,i=0;i<n;i++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===a&&0===o)throw new FS.ErrnoError(6);if(null==a)break;o++,t[r+i]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new FS.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var r=Buffer.alloc?Buffer.alloc(256):new Buffer(256),n=0;try{n=fs.readSync(process.stdin.fd,r,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;n=0}t=0<n?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(out(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(out(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(err(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(err(UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(FS.isBlkdev(r)||FS.isFIFO(r))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var o=FS.createNode(e,t,r,n);return FS.isDir(o.mode)?(o.node_ops=MEMFS.ops_table.dir.node,o.stream_ops=MEMFS.ops_table.dir.stream,o.contents={}):FS.isFile(o.mode)?(o.node_ops=MEMFS.ops_table.file.node,o.stream_ops=MEMFS.ops_table.file.stream,o.usedBytes=0,o.contents=null):FS.isLink(o.mode)?(o.node_ops=MEMFS.ops_table.link.node,o.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(o.mode)&&(o.node_ops=MEMFS.ops_table.chrdev.node,o.stream_ops=MEMFS.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(t<=r)){t=Math.max(t,r*(r<1048576?2:1.125)|0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),0<e.usedBytes&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(){throw FS.genericErrors[44]},mknod:function(e,t,r,n){return MEMFS.createNode(e,t,r,n)},rename:function(e,t,r){if(FS.isDir(e.mode)){var n;try{n=FS.lookupNode(t,r)}catch(e){}if(n)for(var o in n.contents)throw new FS.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,(t.contents[r]=e).parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=FS.lookupNode(e,t);for(var n in r.contents)throw new FS.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=MEMFS.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,n);if(8<a&&i.subarray)t.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)t[r+s]=i[o+s];return a},write:function(e,t,r,n,o){if(!n)return 0;var i=e.node;if(i.timestamp=Date.now(),t.subarray&&(!i.contents||i.contents.subarray)){if(0,0===i.usedBytes&&0===o)return i.contents=new Uint8Array(t.subarray(r,r+n)),i.usedBytes=n;if(o+n<=i.usedBytes)return i.contents.set(t.subarray(r,r+n),o),n}if(MEMFS.expandFileStorage(i,o+n),i.contents.subarray&&t.subarray)i.contents.set(t.subarray(r,r+n),o);else for(var a=0;a<n;a++)i.contents[o+a]=t[r+a];return i.usedBytes=Math.max(i.usedBytes,o+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new FS.ErrnoError(28);return n},allocate:function(e,t,r){MEMFS.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,i,a){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);var s,u,l=e.node.contents;if(2&a||l.buffer!==t&&l.buffer!==t.buffer){(0<o||o+n<e.node.usedBytes)&&(l=l.subarray?l.subarray(o,o+n):Array.prototype.slice.call(l,o,o+n)),u=!0;var c=t.buffer==HEAP8.buffer;if(!(s=_malloc(n)))throw new FS.ErrnoError(48);(c?HEAP8:t).set(l,s)}else u=!1,s=l.byteOffset;return{ptr:s,allocated:u}},msync:function(e,t,r,n,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&o)return 0;MEMFS.stream_ops.write(e,t,0,n,r,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e}),DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(t,i,a){IDBFS.getLocalSet(t,function(e,o){if(e)return a(e);IDBFS.getRemoteSet(t,function(e,t){if(e)return a(e);var r=i?t:o,n=i?o:t;IDBFS.reconcile(r,n,a)})})},getDB:function(e,t){var r,n=IDBFS.dbs[e];if(n)return t(null,n);try{r=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(e){return t(e)}if(!r)return t("Unable to connect to IndexedDB");r.onupgradeneeded=function(e){var t,r=e.target.result,n=e.target.transaction;(t=r.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?n.objectStore(IDBFS.DB_STORE_NAME):r.createObjectStore(IDBFS.DB_STORE_NAME)).indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},r.onsuccess=function(){n=r.result,IDBFS.dbs[e]=n,t(null,n)},r.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var r={};function n(e){return"."!==e&&".."!==e}function o(t){return function(e){return PATH.join2(t,e)}}for(var i=FS.readdir(e.mountpoint).filter(n).map(o(e.mountpoint));i.length;){var a,s=i.pop();try{a=FS.stat(s)}catch(e){return t(e)}FS.isDir(a.mode)&&i.push.apply(i,FS.readdir(s).filter(n).map(o(s))),r[s]={timestamp:a.mtime}}return t(null,{type:"local",entries:r})},getRemoteSet:function(e,n){var o={};IDBFS.getDB(e.mountpoint,function(e,r){if(e)return n(e);try{var t=r.transaction([IDBFS.DB_STORE_NAME],"readonly");t.onerror=function(e){n(this.error),e.preventDefault()},t.objectStore(IDBFS.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var t=e.target.result;if(!t)return n(null,{type:"remote",db:r,entries:o});o[t.primaryKey]={timestamp:t.key},t.continue()}}catch(e){return n(e)}})},loadLocalEntry:function(e,t){var r,n;try{n=FS.lookupPath(e).node,r=FS.stat(e)}catch(e){return t(e)}return FS.isDir(r.mode)?t(null,{timestamp:r.mtime,mode:r.mode}):FS.isFile(r.mode)?(n.contents=MEMFS.getFileDataAsTypedArray(n),t(null,{timestamp:r.mtime,mode:r.mode,contents:n.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,r){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode);else{if(!FS.isFile(t.mode))return r(new Error("node type not supported"));FS.writeFile(e,t.contents,{canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(e){return r(e)}r(null)},removeLocalEntry:function(e,t){try{FS.lookupPath(e);var r=FS.stat(e);FS.isDir(r.mode)?FS.rmdir(e):FS.isFile(r.mode)&&FS.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:function(e,t,r){var n=e.get(t);n.onsuccess=function(e){r(null,e.target.result)},n.onerror=function(e){r(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,r,n){var o=e.put(r,t);o.onsuccess=function(){n(null)},o.onerror=function(e){n(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,r){var n=e.delete(t);n.onsuccess=function(){r(null)},n.onerror=function(e){r(this.error),e.preventDefault()}},reconcile:function(n,o,t){var i=0,a=[];Object.keys(n.entries).forEach(function(e){var t=n.entries[e],r=o.entries[e];(!r||t.timestamp>r.timestamp)&&(a.push(e),i++)});var r=[];if(Object.keys(o.entries).forEach(function(e){o.entries[e];n.entries[e]||(r.push(e),i++)}),!i)return t(null);var s=!1,e=("remote"===n.type?n.db:o.db).transaction([IDBFS.DB_STORE_NAME],"readwrite"),u=e.objectStore(IDBFS.DB_STORE_NAME);function l(e){if(e&&!s)return s=!0,t(e)}e.onerror=function(e){l(this.error),e.preventDefault()},e.oncomplete=function(e){s||t(null)},a.sort().forEach(function(r){"local"===o.type?IDBFS.loadRemoteEntry(u,r,function(e,t){if(e)return l(e);IDBFS.storeLocalEntry(r,t,l)}):IDBFS.loadLocalEntry(r,function(e,t){if(e)return l(e);IDBFS.storeRemoteEntry(u,r,t,l)})}),r.sort().reverse().forEach(function(e){"local"===o.type?IDBFS.removeLocalEntry(e,l):IDBFS.removeRemoteEntry(u,e,l)})}},ERRNO_CODES={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/);var e=process.binding("constants");e.fs&&(e=e.fs),NODEFS.flagsForNodeMap={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},bufferFrom:function(e){return Buffer.alloc?Buffer.from(e):new Buffer(e)},convertNodeCode:function(e){var t=e.code;return assert(t in ERRNO_CODES),ERRNO_CODES[t]},mount:function(e){return assert(ENVIRONMENT_HAS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,r){if(!FS.isDir(r)&&!FS.isFile(r)&&!FS.isLink(r))throw new FS.ErrnoError(28);var n=FS.createNode(e,t,r);return n.node_ops=NODEFS.node_ops,n.stream_ops=NODEFS.stream_ops,n},getMode:function(e){var t;try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(292&t.mode)>>2)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}return t.mode},realPath:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsForNode:function(e){e&=-2097153,e&=-2049,e&=-32769,e&=-524289;var t=0;for(var r in NODEFS.flagsForNodeMap)e&r&&(t|=NODEFS.flagsForNodeMap[r],e^=r);if(e)throw new FS.ErrnoError(28);return t},node_ops:{getattr:function(e){var t,r=NODEFS.realPath(e);try{t=fs.lstatSync(r)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var r=NODEFS.realPath(e);try{if(void 0!==t.mode&&(fs.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.timestamp){var n=new Date(t.timestamp);fs.utimesSync(r,n,n)}void 0!==t.size&&fs.truncateSync(r,t.size)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},lookup:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t),n=NODEFS.getMode(r);return NODEFS.createNode(e,t,n)},mknod:function(e,t,r,n){var o=NODEFS.createNode(e,t,r,n),i=NODEFS.realPath(o);try{FS.isDir(o.mode)?fs.mkdirSync(i,o.mode):fs.writeFileSync(i,"",{mode:o.mode})}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}return o},rename:function(e,t,r){var n=NODEFS.realPath(e),o=PATH.join2(NODEFS.realPath(t),r);try{fs.renameSync(n,o)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},unlink:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.unlinkSync(r)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},rmdir:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.rmdirSync(r)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},readdir:function(e){var t=NODEFS.realPath(e);try{return fs.readdirSync(t)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},symlink:function(e,t,r){var n=PATH.join2(NODEFS.realPath(e),t);try{fs.symlinkSync(r,n)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},readlink:function(e){var t=NODEFS.realPath(e);try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node);try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsForNode(e.flags)))}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},read:function(e,t,r,n,o){if(0===n)return 0;try{return fs.readSync(e.nfd,NODEFS.bufferFrom(t.buffer),r,n,o)}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},write:function(e,t,r,n,o){try{return fs.writeSync(e.nfd,NODEFS.bufferFrom(t.buffer),r,n,o)}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},llseek:function(e,t,r){var n=t;if(1===r)n+=e.position;else if(2===r&&FS.isFile(e.node.mode))try{n+=fs.fstatSync(e.nfd).size}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}if(n<0)throw new FS.ErrnoError(28);return n}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var i=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),a={};function n(e){for(var t=e.split("/"),r=i,n=0;n<t.length-1;n++){var o=t.slice(0,n+1).join("/");a[o]||(a[o]=WORKERFS.createNode(r,t[n],WORKERFS.DIR_MODE,0)),r=a[o]}return r}function o(e){var t=e.split("/");return t[t.length-1]}return Array.prototype.forEach.call(e.opts.files||[],function(e){WORKERFS.createNode(n(e.name),o(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(n(e.name),o(e.name),WORKERFS.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(r){r.metadata.files.forEach(function(e){var t=e.filename.substr(1);WORKERFS.createNode(n(t),o(t),WORKERFS.FILE_MODE,0,r.blob.slice(e.start,e.end))})}),i},createNode:function(e,t,r,n,o,i){var a=FS.createNode(e,t,r);return a.mode=r,a.node_ops=WORKERFS.node_ops,a.stream_ops=WORKERFS.stream_ops,a.timestamp=(i||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),r===WORKERFS.FILE_MODE?(a.size=o.size,a.contents=o):(a.size=4096,a.contents={}),e&&(e.contents[t]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(){throw new FS.ErrnoError(44)},mknod:function(){throw new FS.ErrnoError(63)},rename:function(){throw new FS.ErrnoError(63)},unlink:function(){throw new FS.ErrnoError(63)},rmdir:function(){throw new FS.ErrnoError(63)},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(){throw new FS.ErrnoError(63)},readlink:function(){throw new FS.ErrnoError(63)}},stream_ops:{read:function(e,t,r,n,o){if(o>=e.node.size)return 0;var i=e.node.contents.slice(o,o+n),a=WORKERFS.reader.readAsArrayBuffer(i);return t.set(new Uint8Array(a),r),i.size},write:function(){throw new FS.ErrnoError(29)},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.size),n<0)throw new FS.ErrnoError(28);return n}}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(t=t||{},!(e=PATH_FS.resolve(FS.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.recurse_count)throw new FS.ErrnoError(32);for(var o=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),i=FS.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&t.parent)break;if(i=FS.lookupNode(i,o[s]),a=PATH.join2(a,o[s]),FS.isMountpoint(i)&&(!u||u&&t.follow_mount)&&(i=i.mounted.root),!u||t.follow)for(var l=0;FS.isLink(i.mode);){var c=FS.readlink(a);if(a=PATH_FS.resolve(PATH.dirname(a),c),i=FS.lookupPath(a,{recurse_count:t.recurse_count}).node,40<l++)throw new FS.ErrnoError(32)}}return{path:a,node:i}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else for(var r=FS.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=FS.mayLookup(e);if(r)throw new FS.ErrnoError(r,e);for(var n=FS.hashName(e.id,t),o=FS.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return FS.lookup(e,t)},createNode:function(e,t,r,n){if(!FS.FSNode){FS.FSNode=function(e,t,r,n){e=e||this,this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},FS.FSNode.prototype={};Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var o=new FS.FSNode(e,t,r,n);return FS.hashAddNode(o),o},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{FS.lookupNode(e,t);return 20}catch(e){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n;try{n=FS.lookupNode(e,t)}catch(e){return e.errno}var o=FS.nodePermissions(e,"wx");if(o)return o;if(r){if(!FS.isDir(n.mode))return 54;if(FS.isRoot(n)||FS.getPath(n)===FS.cwd())return 10}else if(FS.isDir(n.mode))return 31;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?32:FS.isDir(e.mode)&&("r"!==FS.flagsToPermissionString(t)||512&t)?31:FS.nodePermissions(e,FS.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!FS.streams[r])return r;throw new FS.ErrnoError(33)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,r){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var n=new FS.FSStream;for(var o in e)n[o]=e[o];e=n;var i=FS.nextfd(t,r);return e.fd=i,FS.streams[i]=e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(t,r){"function"==typeof t&&(r=t,t=!1),FS.syncFSRequests++,1<FS.syncFSRequests&&console.log("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=FS.getMounts(FS.root.mount),o=0;function i(e){return FS.syncFSRequests--,r(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++o>=n.length&&i(null)}n.forEach(function(e){if(!e.type.syncfs)return a(null);e.type.syncfs(e,t,a)})},mount:function(e,t,r){var n,o="/"===r,i=!r;if(o&&FS.root)throw new FS.ErrnoError(10);if(!o&&!i){var a=FS.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,FS.isMountpoint(n))throw new FS.ErrnoError(10);if(!FS.isDir(n.mode))throw new FS.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},u=e.mount(s);return(u.mount=s).root=u,o?FS.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(28);var r=t.node,n=r.mounted,o=FS.getMounts(n);Object.keys(FS.nameTable).forEach(function(e){for(var t=FS.nameTable[e];t;){var r=t.name_next;-1!==o.indexOf(t.mount)&&FS.destroyNode(t),t=r}}),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=FS.lookupPath(e,{parent:!0}).node,o=PATH.basename(e);if(!o||"."===o||".."===o)throw new FS.ErrnoError(28);var i=FS.mayCreate(n,o);if(i)throw new FS.ErrnoError(i);if(!n.node_ops.mknod)throw new FS.ErrnoError(63);return n.node_ops.mknod(n,o,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{FS.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,FS.mknod(e,t,r)},symlink:function(e,t){if(!PATH_FS.resolve(e))throw new FS.ErrnoError(44);var r=FS.lookupPath(t,{parent:!0}).node;if(!r)throw new FS.ErrnoError(44);var n=PATH.basename(t),o=FS.mayCreate(r,n);if(o)throw new FS.ErrnoError(o);if(!r.node_ops.symlink)throw new FS.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:function(t,r){var e,n,o=PATH.dirname(t),i=PATH.dirname(r),a=PATH.basename(t),s=PATH.basename(r);try{e=FS.lookupPath(t,{parent:!0}).node,n=FS.lookupPath(r,{parent:!0}).node}catch(e){throw new FS.ErrnoError(10)}if(!e||!n)throw new FS.ErrnoError(44);if(e.mount!==n.mount)throw new FS.ErrnoError(75);var u,l=FS.lookupNode(e,a),c=PATH_FS.relative(t,i);if("."!==c.charAt(0))throw new FS.ErrnoError(28);if("."!==(c=PATH_FS.relative(r,o)).charAt(0))throw new FS.ErrnoError(55);try{u=FS.lookupNode(n,s)}catch(e){}if(l!==u){var d=FS.isDir(l.mode),f=FS.mayDelete(e,a,d);if(f)throw new FS.ErrnoError(f);if(f=u?FS.mayDelete(n,s,d):FS.mayCreate(n,s))throw new FS.ErrnoError(f);if(!e.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(l)||u&&FS.isMountpoint(u))throw new FS.ErrnoError(10);if(n!==e&&(f=FS.nodePermissions(e,"w")))throw new FS.ErrnoError(f);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(t,r)}catch(e){console.log("FS.trackingDelegate['willMovePath']('"+t+"', '"+r+"') threw an exception: "+e.message)}FS.hashRemoveNode(l);try{e.node_ops.rename(l,n,s)}catch(e){throw e}finally{FS.hashAddNode(l)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(t,r)}catch(e){console.log("FS.trackingDelegate['onMovePath']('"+t+"', '"+r+"') threw an exception: "+e.message)}}},rmdir:function(t){var e=FS.lookupPath(t,{parent:!0}).node,r=PATH.basename(t),n=FS.lookupNode(e,r),o=FS.mayDelete(e,r,!0);if(o)throw new FS.ErrnoError(o);if(!e.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(t)}catch(e){console.log("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.rmdir(e,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(t)}catch(e){console.log("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new FS.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(t){var e=FS.lookupPath(t,{parent:!0}).node,r=PATH.basename(t),n=FS.lookupNode(e,r),o=FS.mayDelete(e,r,!1);if(o)throw new FS.ErrnoError(o);if(!e.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(t)}catch(e){console.log("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.unlink(e,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(t)}catch(e){console.log("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readlink:function(e){var t=FS.lookupPath(e).node;if(!t)throw new FS.ErrnoError(44);if(!t.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=FS.lookupPath(e,{follow:!t}).node;if(!r)throw new FS.ErrnoError(44);if(!r.node_ops.getattr)throw new FS.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,r){var n;"string"==typeof e?n=FS.lookupPath(e,{follow:!r}).node:n=e;if(!n.node_ops.setattr)throw new FS.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);FS.chmod(r.node,t)},chown:function(e,t,r,n){var o;"string"==typeof e?o=FS.lookupPath(e,{follow:!n}).node:o=e;if(!o.node_ops.setattr)throw new FS.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,r){FS.chown(e,t,r,!0)},fchown:function(e,t,r){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);FS.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(28);var r;"string"==typeof e?r=FS.lookupPath(e,{follow:!0}).node:r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(r.mode))throw new FS.ErrnoError(31);if(!FS.isFile(r.mode))throw new FS.ErrnoError(28);var n=FS.nodePermissions(r,"w");if(n)throw new FS.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);if(0==(2097155&r.flags))throw new FS.ErrnoError(28);FS.truncate(r.node,t)},utime:function(e,t,r){var n=FS.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(t,e,r,n,o){if(""===t)throw new FS.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(e="string"==typeof e?FS.modeStringToFlags(e):e)?4095&r|32768:0,"object"===_typeof(t))i=t;else{t=PATH.normalize(t);try{i=FS.lookupPath(t,{follow:!(131072&e)}).node}catch(e){}}var a=!1;if(64&e)if(i){if(128&e)throw new FS.ErrnoError(20)}else i=FS.mknod(t,r,0),a=!0;if(!i)throw new FS.ErrnoError(44);if(FS.isChrdev(i.mode)&&(e&=-513),65536&e&&!FS.isDir(i.mode))throw new FS.ErrnoError(54);if(!a){var s=FS.mayOpen(i,e);if(s)throw new FS.ErrnoError(s)}512&e&&FS.truncate(i,0),e&=-641;var u=FS.createStream({node:i,path:FS.getPath(i),flags:e,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,o);u.stream_ops.open&&u.stream_ops.open(u),!Module.logReadFiles||1&e||(FS.readFiles||(FS.readFiles={}),t in FS.readFiles||(FS.readFiles[t]=1,console.log("FS.trackingDelegate error on read file: "+t)));try{if(FS.trackingDelegate.onOpenFile){var l=0;1!=(2097155&e)&&(l|=FS.tracking.openFlags.READ),0!=(2097155&e)&&(l|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(t,l)}}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return u},close:function(e){if(FS.isClosed(e))throw new FS.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{FS.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new FS.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,o){if(n<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(1==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.read)throw new FS.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new FS.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,r,n,o);return i||(e.position+=a),a},write:function(t,e,r,n,o,i){if(n<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(t))throw new FS.ErrnoError(8);if(0==(2097155&t.flags))throw new FS.ErrnoError(8);if(FS.isDir(t.node.mode))throw new FS.ErrnoError(31);if(!t.stream_ops.write)throw new FS.ErrnoError(28);1024&t.flags&&FS.llseek(t,0,2);var a=void 0!==o;if(a){if(!t.seekable)throw new FS.ErrnoError(70)}else o=t.position;var s=t.stream_ops.write(t,e,r,n,o,i);a||(t.position+=s);try{t.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(t.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+e.message)}return s},allocate:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(t<0||r<=0)throw new FS.ErrnoError(28);if(0==(2097155&e.flags))throw new FS.ErrnoError(8);if(!FS.isFile(e.node.mode)&&!FS.isDir(e.node.mode))throw new FS.ErrnoError(43);if(!e.stream_ops.allocate)throw new FS.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,o,i,a){if(0!=(2&i)&&0==(2&a)&&2!=(2097155&e.flags))throw new FS.ErrnoError(2);if(1==(2097155&e.flags))throw new FS.ErrnoError(2);if(!e.stream_ops.mmap)throw new FS.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,o,i,a)},msync:function(e,t,r,n,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,o):0},munmap:function(){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=FS.open(e,t.flags),o=FS.stat(e).size,i=new Uint8Array(o);return FS.read(n,i,0,o,0),"utf8"===t.encoding?r=UTF8ArrayToString(i,0):"binary"===t.encoding&&(r=i),FS.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||"w";var n=FS.open(e,r.flags,r.mode);if("string"==typeof t){var o=new Uint8Array(lengthBytesUTF8(t)+1),i=stringToUTF8Array(t,o,0,o.length);FS.write(n,o,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");FS.write(n,t,0,t.byteLength,void 0,r.canOwn)}FS.close(n)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(null===t.node)throw new FS.ErrnoError(44);if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(54);var r=FS.nodePermissions(t.node,"x");if(r)throw new FS.ErrnoError(r);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n){return n}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0)),"object"===("undefined"==typeof crypto?"undefined":_typeof(crypto))&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else if(ENVIRONMENT_IS_NODE)try{var r=require("crypto");e=function(){return r.randomBytes(1)[0]}}catch(e){}e=e||function(){abort("random_device")},FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=FS.getStream(r);if(!n)throw new FS.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");FS.open("/dev/stdin","r"),FS.open("/dev/stdout","w"),FS.open("/dev/stderr","w")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach(function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,r){FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=r||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module._fflush;e&&e(0);for(var t=0;t<FS.streams.length;t++){var r=FS.streams[t];r&&FS.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=PATH.join.apply(null,e);return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return PATH_FS.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var r=FS.analyzePath(e,t);return r.exists?r.object:(___setErrNo(r.error),null)},analyzePath:function(e,t){try{e=(n=FS.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=FS.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=PATH.basename(e),n=FS.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createFolder:function(e,t,r,n){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),i=FS.getMode(r,n);return FS.mkdir(o,i)},createPath:function(e,t){e="string"==typeof e?e:FS.getPath(e);for(var r=t.split("/").reverse();r.length;){var n=r.pop();if(n){var o=PATH.join2(e,n);try{FS.mkdir(o)}catch(e){}e=o}}return o},createFile:function(e,t,r,n,o){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(n,o);return FS.create(i,a)},createDataFile:function(e,t,r,n,o,i){var a=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,s=FS.getMode(n,o),u=FS.create(a,s);if(r){if("string"==typeof r){for(var l=new Array(r.length),c=0,d=r.length;c<d;++c)l[c]=r.charCodeAt(c);r=l}FS.chmod(u,146|s);var f=FS.open(u,"w");FS.write(f,r,0,r.length,0,i),FS.close(f),FS.chmod(u,s)}return u},createDevice:function(e,t,s,i){var r=PATH.join2("string"==typeof e?e:FS.getPath(e),t),n=FS.getMode(!!s,!!i);FS.createDevice.major||(FS.createDevice.major=64);var o=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(o,{open:function(e){e.seekable=!1},close:function(){i&&i.buffer&&i.buffer.length&&i(10)},read:function(e,t,r,n){for(var o=0,i=0;i<n;i++){var a;try{a=s()}catch(e){throw new FS.ErrnoError(29)}if(void 0===a&&0===o)throw new FS.ErrnoError(6);if(null==a)break;o++,t[r+i]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n){for(var o=0;o<n;o++)try{i(t[r+o])}catch(e){throw new FS.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}}),FS.mkdev(r,n,o)},createLink:function(e,t,r){var n=PATH.join2("string"==typeof e?e:FS.getPath(e),t);return FS.symlink(r,n)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(read_(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||___setErrNo(29),t},createLazyFile:function(e,t,s,r,n){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",s,!1),e.send(null),!(200<=e.status&&e.status<300||304===e.status))throw new Error("Couldn't load "+s+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),r=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,i=1048576;r||(i=n);var a=this;a.setDataGetter(function(e){var t=e*i,r=(e+1)*i-1;if(r=Math.min(r,n-1),void 0===a.chunks[e]&&(a.chunks[e]=function(e,t){if(t<e)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(n-1<t)throw new Error("only "+n+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",s,!1),n!==i&&r.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(200<=r.status&&r.status<300||304===r.status))throw new Error("Couldn't load "+s+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):intArrayFromString(r.responseText||"",!0)}(t,r)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]}),!o&&n||(i=n=1,n=this.getter(0).length,i=n,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=i,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i=new o;Object.defineProperties(i,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:i}}else a={isDevice:!1,url:s};var u=FS.createFile(e,t,a,r,n);a.contents?u.contents=a.contents:a.url&&(u.contents=null,u.url=a.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(u.stream_ops).forEach(function(e){var t=u.stream_ops[e];l[e]=function(){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(29);return t.apply(null,arguments)}}),l.read=function(e,t,r,n,o){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(29);var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var s=0;s<a;s++)t[r+s]=i[o+s];else for(s=0;s<a;s++)t[r+s]=i.get(o+s);return a},u.stream_ops=l,u},createPreloadedFile:function(o,i,e,a,s,u,l,c,d,f){Browser.init();var p=i?PATH_FS.resolve(PATH.join2(o,i)):o,m=getUniqueRunDependency("cp "+p);function t(t){function r(e){f&&f(),c||FS.createDataFile(o,i,e,a,s,d),u&&u(),removeRunDependency(m)}var n=!1;Module.preloadPlugins.forEach(function(e){n||e.canHandle(p)&&(e.handle(t,p,r,function(){l&&l(),removeRunDependency(m)}),n=!0)}),n||r(t)}addRunDependency(m),"string"==typeof e?Browser.asyncLoad(e,function(e){t(e)},l):t(e)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,s,u){s=s||function(){},u=u||function(){};var e=FS.indexedDB();try{var l=e.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return u(e)}l.onupgradeneeded=function(){console.log("creating db"),l.result.createObjectStore(FS.DB_STORE_NAME)},l.onsuccess=function(){var e=l.result.transaction([FS.DB_STORE_NAME],"readwrite"),r=e.objectStore(FS.DB_STORE_NAME),n=0,o=0,i=t.length;function a(){(0==o?s:u)()}t.forEach(function(e){var t=r.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){++n+o==i&&a()},t.onerror=function(){n+ ++o==i&&a()}}),e.onerror=u},l.onerror=u},loadFilesFromDB:function(s,u,l){u=u||function(){},l=l||function(){};var e=FS.indexedDB();try{var c=e.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return l(e)}c.onupgradeneeded=l,c.onsuccess=function(){var e=c.result;try{var t=e.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void l(e)}var r=t.objectStore(FS.DB_STORE_NAME),n=0,o=0,i=s.length;function a(){(0==o?u:l)()}s.forEach(function(e){var t=r.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),++n+o==i&&a()},t.onerror=function(){n+ ++o==i&&a()}}),t.onerror=l},c.onerror=l}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=FS.cwd();else{var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);r=n.path}t=PATH.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return HEAP32[r>>2]=n.dev,HEAP32[r+4>>2]=0,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAP32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,HEAP32[r+32>>2]=0,tempI64=[n.size>>>0,(tempDouble=n.size,1<=+Math_abs(tempDouble)?0<tempDouble?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks,HEAP32[r+56>>2]=n.atime.getTime()/1e3|0,HEAP32[r+60>>2]=0,HEAP32[r+64>>2]=n.mtime.getTime()/1e3|0,HEAP32[r+68>>2]=0,HEAP32[r+72>>2]=n.ctime.getTime()/1e3|0,HEAP32[r+76>>2]=0,tempI64=[n.ino>>>0,(tempDouble=n.ino,1<=+Math_abs(tempDouble)?0<tempDouble?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+80>>2]=tempI64[0],HEAP32[r+84>>2]=tempI64[1],0},doMsync:function(e,t,r,n){var o=new Uint8Array(HEAPU8.subarray(e,e+r));FS.msync(t,o,0,r,n)},doMkdir:function(e,t){return"/"===(e=PATH.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return FS.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var n=FS.readlink(e),o=Math.min(r,lengthBytesUTF8(n)),i=HEAP8[t+o];return stringToUTF8(n,t,r+1),HEAP8[t+o]=i,o},doAccess:function(e,t){if(-8&t)return-28;var r;if(!(r=FS.lookupPath(e,{follow:!0}).node))return-44;var n="";return 4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&FS.nodePermissions(r,n)?-2:0},doDup:function(e,t,r){var n=FS.getStream(r);return n&&FS.close(n),FS.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=HEAP32[t+8*i>>2],s=HEAP32[t+(8*i+4)>>2],u=FS.read(e,HEAP8,a,s,n);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=HEAP32[t+8*i>>2],s=HEAP32[t+(8*i+4)>>2],u=FS.write(e,HEAP8,a,s,n);if(u<0)return-1;o+=u}return o},varargs:0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(){return UTF8ToString(SYSCALLS.get())},getStreamFromFD:function(e){void 0===e&&(e=SYSCALLS.get());var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t},get64:function(){var e=SYSCALLS.get();SYSCALLS.get();return e},getZero:function(){SYSCALLS.get()}};function ___syscall221(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();switch(SYSCALLS.get()){case 0:return(n=SYSCALLS.get())<0?-28:FS.open(r.path,r.flags,0,n).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var n=SYSCALLS.get();return r.flags|=n,0;case 12:n=SYSCALLS.get();return HEAP16[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return ___setErrNo(28),-1;default:return-28}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall3(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),o=SYSCALLS.get();return FS.read(r,HEAP8,n,o)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall5(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStr(),n=SYSCALLS.get(),o=SYSCALLS.get();return FS.open(r,n,o).fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_close(){return _fd_close.apply(null,arguments)}function _fd_fdstat_get(e,t){try{var r=SYSCALLS.getStreamFromFD(e),n=r.tty?2:FS.isDir(r.mode)?3:FS.isLink(r.mode)?7:4;return HEAP8[t>>0]=n,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_fdstat_get(){return _fd_fdstat_get.apply(null,arguments)}function _fd_seek(e,t,r,n,o){try{var i=SYSCALLS.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||s<=a?-61:(FS.llseek(i,a,n),tempI64=[i.position>>>0,(tempDouble=i.position,1<=+Math_abs(tempDouble)?0<tempDouble?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],i.getdents&&0==a&&0===n&&(i.getdents=null),0)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_seek(){return _fd_seek.apply(null,arguments)}function _fd_write(e,t,r,n){try{var o=SYSCALLS.getStreamFromFD(e),i=SYSCALLS.doWritev(o,t,r);return HEAP32[n>>2]=i,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_write(){return _fd_write.apply(null,arguments)}function _abort(){abort()}function _clock(){return void 0===_clock.start&&(_clock.start=Date.now()),1e3*(Date.now()-_clock.start)|0}function _emscripten_get_heap_size(){return HEAP8.length}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var t=_emscripten_get_heap_size(),r=2147418112;if(r<e)return!1;for(var n=Math.max(t,16777216);n<e;)n=n<=536870912?alignUp(2*n,65536):Math.min(alignUp((3*n+2147483648)/4,65536),r);return!!emscripten_realloc_buffer(n)}var _fabs=Math_abs;function _getenv(e){return 0===e?0:(e=UTF8ToString(e),ENV.hasOwnProperty(e)?(_getenv.ret&&_free(_getenv.ret),_getenv.ret=allocateUTF8(ENV[e]),_getenv.ret):0)}function _gettimeofday(e){var t=Date.now();return HEAP32[e>>2]=t/1e3|0,HEAP32[e+4>>2]=t%1e3*1e3|0,0}var ___tm_timezone=(stringToUTF8("GMT",157056,4),157056);function _llvm_exp2_f32(e){return Math.pow(2,e)}function _llvm_exp2_f64(e){return _llvm_exp2_f32(e)}var _llvm_trunc_f64=Math_trunc;function _emscripten_memcpy_big(e,t,r){HEAPU8.set(HEAPU8.subarray(t,t+r),e)}if(FS.staticInit(),ENVIRONMENT_HAS_NODE){var fs=require("fs"),NODEJS_PATH=require("path");NODEFS.staticInit()}function intArrayFromString(e,t,r){var n=0<r?r:lengthBytesUTF8(e)+1,o=new Array(n),i=stringToUTF8Array(e,o,0,o.length);return t&&(o.length=i),o}var asmGlobalArg={},asmLibraryArg={s:___buildEnvironment,e:___syscall221,j:___syscall3,i:___syscall5,d:___wasi_fd_close,h:___wasi_fd_fdstat_get,k:___wasi_fd_seek,g:___wasi_fd_write,__memory_base:1024,__table_base:0,b:_abort,f:_clock,r:_emscripten_get_heap_size,q:_emscripten_memcpy_big,p:_emscripten_resize_heap,o:_fabs,c:_getenv,n:_gettimeofday,m:_llvm_exp2_f64,l:_llvm_trunc_f64,a:abort,memory:wasmMemory,table:wasmTable},asm=Module.asm(asmGlobalArg,asmLibraryArg,buffer);Module.asm=asm;var ___emscripten_environ_constructor=Module.___emscripten_environ_constructor=function(){return Module.asm.t.apply(null,arguments)},___errno_location=Module.___errno_location=function(){return Module.asm.u.apply(null,arguments)},_closeVideo=Module._closeVideo=function(){return Module.asm.v.apply(null,arguments)},_decodeCodecContext=Module._decodeCodecContext=function(){return Module.asm.w.apply(null,arguments)},_exitMissile=Module._exitMissile=function(){return Module.asm.x.apply(null,arguments)},_free=Module._free=function(){return Module.asm.y.apply(null,arguments)},_getFrame=Module._getFrame=function(){return Module.asm.z.apply(null,arguments)},_initMissile=Module._initMissile=function(){return Module.asm.A.apply(null,arguments)},_initializeDecoder=Module._initializeDecoder=function(){return Module.asm.B.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm.C.apply(null,arguments)},_release=Module._release=function(){return Module.asm.D.apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return Module.asm.G.apply(null,arguments)},stackRestore=Module.stackRestore=function(){return Module.asm.H.apply(null,arguments)},stackSave=Module.stackSave=function(){return Module.asm.I.apply(null,arguments)},dynCall_v=Module.dynCall_v=function(){return Module.asm.E.apply(null,arguments)},dynCall_vi=Module.dynCall_vi=function(){return Module.asm.F.apply(null,arguments)},calledRun;function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function t(){calledRun||(calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),postRun()))}0<runDependencies||(preRun(),0<runDependencies||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()))}if(Module.asm=asm,Module.ccall=ccall,Module.cwrap=cwrap,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)},Module.run=run,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);0<Module.preInit.length;)Module.preInit.pop()();noExitRuntime=!0,run();